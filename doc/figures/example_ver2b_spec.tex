\begin{lstlisting}[morekeywords={g_qCount},belowskip=0pt, name=ver2b]
// dynamically allocated 
// arrays of size N,
// may overlap
int *a, *b;

for (int k=0;k<M;k++) {
  int *p = a, *q = b;
\end{lstlisting}

\begin{lstlisting}[aboveskip=0pt,belowskip=0pt,backgroundcolor=\color{lightgray},
firstnumber=auto, name=ver2b]
  check_heap(p, read_only);
  check_heap(q, private);
\end{lstlisting}

\begin{lstlisting}[aboveskip=0pt,belowskip=0pt, firstnumber=auto, name=ver2b]
  for (int i=0;i<N;i++) {
\end{lstlisting}

\begin{lstlisting}[aboveskip=0pt,belowskip=0pt,backgroundcolor=\color{lightgray},
firstnumber=auto, name=ver2b]
    spec_write(q);
\end{lstlisting}

\begin{lstlisting}[aboveskip=0pt,belowskip=0pt, firstnumber=auto, name=ver2b]
    *q = work(*p);
    p++;
    q++;
  }
}
\end{lstlisting}
