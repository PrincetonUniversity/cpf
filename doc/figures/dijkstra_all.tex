\begin{lstlisting}[morekeywords={iPrev,piPrev,g_qCount},belowskip=0pt]
// global variables
int iPrev;
int g_qCount = 0;

void enqueue(..., int piPrev) {
  ...
  ... = piPrev;
  g_qCount++;
}

void dequeue(..., int *piPrev) {
  if (qHead) {
    ...
    *piPrev = ...
    g_qCount--;
  }
}

for (int i = 0; i < N; i++) { // hot loop
  ...
  enqueue(i, 0, NONE);
  while ( g_qCount ) {
    dequeue(&iNode, &iDist, &iPrev);
    for (k = 0; k < NUM_NODES; k++) {
      ...
      if ( valid node ) {
        ...
        enqueue(i, iDist+iCost, iNode);
      }
    }
  }
  ...
}

\end{lstlisting}
